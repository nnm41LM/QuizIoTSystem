# Arduinoと連携したクイズ企画用ボタンシステム 

![Quiz Button System](images/QuizIoT.gif)  

## 🎯 概要

このプロジェクトは、**Arduinoで作成したクイズボタンの信号を受信し、Unity上でビジュアライズするシステム** です。  
**VTuberのクイズ企画やリアルイベントでの利用** を想定し、ハードウェアと仮想空間をリアルタイムで連携できるように設計しました。

📌 **Arduinoとブレッドボードを活用し、実際のボタン入力をUnity上で可視化** します。  
📌 **テスト用に、キーボード（1～4, 0キー）でも同様の動作が可能** です。

---

## 🔌 ハードウェア構成

Arduinoとブレッドボードを用いた回路を構築し、ボタン入力を**シリアル通信** でUnityへ送信します。  
回路の構成は以下のようになっています。

![Breadboard Layout](images/Quiz_layout.jpg)

- 各ボタンの**チャタリングを防止するプログラムを実装**
- **Arduinoのボタン入力をUnityに送信し、対応するキューブを点灯**
- **汎用的なシリアル通信クラスを作成し、再利用可能な設計に**

---

## 🏗 システム設計（MVPパターン）
本プロジェクトは、**MVPパターン** に基づき開発しました。

- **疎結合な構成** にすることで、**デバッグや仕様変更が容易**
- **Presenterにビルトインメソッド（Start・Update）を集約** し、初期化順序を管理
- **シリアル通信を行う汎用クラス（Utility）を作成し、他のプロジェクトでも再利用可能**

🔹 **ハードウェアとソフトウェアの連携を意識しつつ、拡張性のある設計を目指しました。**

---

## 🛠 使用技術
| 技術 | 詳細 |
|------|------|
| Unity | 2022.3.16f1 |
| C# | **.NET Framework (シリアル通信使用のため)** |
| UniTask | 2.5.10 |
| Arduino IDE | 1.8.15 |

---

## 📥 アプリの使用方法

1. `build` ディレクトリにある ZIP ファイルを解凍し、`exe` ファイルを実行
2. `arduinoCode` ディレクトリの `*.ino` ファイルを **Arduino IDE で書き込み**
3. **対応するボタンを押すと、Unity上のキューブが点灯**
4. **（テスト用）キーボードの `1～4, 0キー` を押しても同様の動作**

---

## 🚀 機能

### 🕹 ボタン入力と点灯
- **Arduinoの 2～5 ピンに接続したボタンを押すと、対応するキューブが点灯**
- **キーボードの 1～4 キーを押すことでも同様の点灯が可能**

### 🔄 点灯リセット
- **Arduinoの 6 ピンに接続したボタンを押すと、点灯がリセット**
- **キーボードの `0` キーを押しても同様のリセットが可能**

---

## 🛠 技術的工夫

📌 **チャタリング防止**
- **ボタンの押し続けを検出する機構** を実装し、**誤入力を防止**
- **C++ による `Chatter` クラスを作成し、Arduino側のコードを簡素化**

📌 **シリアル通信の最適化**
- **`UniTask` を利用し、シリアル通信を処理**
- **マルチスレッド環境でも安定したデータ受信を実現**

📌 **拡張性の高い設計**
- **イベント登録機能を実装** し、**他のプロジェクトでも簡単にシリアル通信を利用可能**
- **Utilityクラスを作成し、汎用的なシリアル通信システムとして再利用可能**

---

## 📚 参考資料

🔗 **技術記事・ブログ**  
[📖 UnityでArduinoからシリアル通信を受け取る](https://qiita.com/Ninagawa123/items/f6595dcf788dd316be8a)  
[📖 UniTask機能紹介](https://qiita.com/toRisouP/items/4445b6b9bf00e49eb147)  
[📖 UniTaskでマルチスレッド処理と例外処理](https://qiita.com/toRisouP/items/0c94002a092fcb29de22)  
